swagger: '2.0'
info:
  x-ibm-name: jwtvalidateshipping
  title: jwtValidateShipping
  version: 1.0.0
schemes:
  - https
host: $(catalog.host)
basePath: /jwtvalidateshipping
consumes:
  - application/json
produces:
  - application/json
securityDefinitions:
  clientIdHeader:
    type: apiKey
    in: header
    name: X-IBM-Client-Id
security:
  - clientIdHeader: []
x-ibm-configuration:
  testable: true
  enforced: true
  cors:
    enabled: true
  assembly:
    execute:
      - set-variable:
          title: set-variable
          actions:
            - set: token-key
              value: "{\"alg\": \"HS256\", \t\"kty\": \"oct\", \t\"k\": \"o5yErLaE-dbgVpSw65Rq57OA9dHyaF66Q_Et5azPa-XUjbyP0w9iRWhR4kru09aFfQLXeIODIN4uhjElYKXt8n76jt0Pjkd2pqk4t9abRF6tnL19GV4pflfL6uvVKkP4weOh39tqHt4TmkBgF2P-gFhgssZpjwq6l82fz3dUhQ2nkzoLA_CnyDGLZLd7SZ1yv73uzfE2Ot813zmig8KTMEMWVcWSDvy61F06vs_6LURcq_IEEevUiubBxG5S2akNnWigfpbhWYjMI5M22FOCpdcDBt4L7K1-yHt95Siz0QUb0MNlT_X8F76wH7_A37GpKKJGqeaiNWmHkgWdE8QWDQ\", \t\"kid\": \"hs256-key\"}"
          version: 1.0.0
      - jwt-validate:
          title: jwt-validate
          jwt: request.headers.x-rmg-auth-token
          output-claims: decoded.claims
          version: 1.0.0
          jws-jwk: token-key
      - gatewayscript:
          title: gatewayscript
          version: 1.0.0
          source: "apim.setvariable( 'message.body', apim.getvariable('decoded.claims'));"
    catch: []
  phase: realized
paths:
  /validate:
    get:
      responses:
        '200':
          description: 200 OK
    parameters:
      - name: X-RMG-Auth-Token
        type: string
        required: true
        in: header
definitions: {}
tags: []
